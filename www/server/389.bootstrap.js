"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[389],{389:(e,t,n)=>{let r;const o="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&o.decode();let a=null;function s(e,t){return e>>>=0,o.decode((null!==a&&0!==a.byteLength||(a=new Uint8Array(r.memory.buffer)),a).subarray(e,e+t))}const i=Object.freeze({Up:0,0:"Up",Right:1,1:"Right",Down:2,2:"Down",Left:3,3:"Left"}),_=Object.freeze({Won:0,0:"Won",Lost:1,1:"Lost",Played:2,2:"Played"}),c="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>r.__wbg_world_free(e>>>0,1)));class d{static __wrap(e){e>>>=0;const t=Object.create(d.prototype);return t.__wbg_ptr=e,c.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,c.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_world_free(e,0)}static new(e,t,n,o){const a=r.world_new(e,t,n,o);return d.__wrap(a)}width(){return r.world_width(this.__wbg_ptr)>>>0}reward_cell(){const e=r.world_reward_cell(this.__wbg_ptr);return 4294967297===e?void 0:e}snake_head_idx(){return r.world_snake_head_idx(this.__wbg_ptr)>>>0}get_game_status(){const e=r.world_get_game_status(this.__wbg_ptr);return 3===e?void 0:e}get_game_status_label(){let e,t;try{const n=r.world_get_game_status_label(this.__wbg_ptr);return e=n[0],t=n[1],s(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}snake_cells(){return r.world_snake_cells(this.__wbg_ptr)>>>0}snake_length(){return r.world_snake_length(this.__wbg_ptr)>>>0}change_game_status(){return r.world_change_game_status(this.__wbg_ptr)}change_snake_direction(e){r.world_change_snake_direction(this.__wbg_ptr,e)}step(){r.world_step(this.__wbg_ptr)}points(){return r.world_points(this.__wbg_ptr)>>>0}}async function l(e){if(void 0!==r)return r;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module_or_path:e}=e):console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===e&&(e=new URL(n(543),n.b));const t=function(){const e={wbg:{}};return e.wbg.__wbg_rnd_68a15b4d7b97a8ea=function(e){var t;return t=e>>>0,Math.random()*t},e.wbg.__wbindgen_init_externref_table=function(){const e=r.__wbindgen_export_0,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e.wbg.__wbindgen_throw=function(e,t){throw new Error(s(e,t))},e}();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:o,module:i}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return function(e,t){return r=e.exports,l.__wbindgen_wasm_module=t,a=null,r.__wbindgen_start(),r}(o,i)}function g(e){return Math.random()*e}l().then((function(e){var t=20,n=document.getElementById("game-points"),r=document.getElementById("game-control-btn"),o=document.getElementById("game-status"),a=g(256),s=g(4),c=d.new(16,a,s,3),l=c.width(),w=document.getElementById("snake-canvas"),u=w.getContext("2d");function b(e,n){var r=e%l,o=Math.floor(e/l);u.fillStyle=0===n?"#7878db":-1===n?"#888888":"#000000",u.beginPath(),u.fillRect(r*t,o*t,t,t)}function f(){var a,s;!function(){u.beginPath();for(var e=0;e<l+1;e++)u.moveTo(t*e,0),u.lineTo(t*e,l*t);for(var n=0;n<l+1;n++)u.moveTo(0,t*n),u.lineTo(l*t,t*n);u.stroke()}(),(a=new Uint32Array(e.memory.buffer,c.snake_cells(),c.snake_length())).filter((function(e,t){return!(t>0&&e===a[0])})).forEach((function(e,t){b(e,t)})),u.stroke(),b(c.reward_cell(),-1),u.stroke(),s=c.get_game_status(),o.textContent=c.get_game_status_label(),n.textContent=c.points().toString(10),s!=_.Won&&s!=_.Lost||(r.textContent="Replay?")}function h(){c.get_game_status()==_.Played&&setTimeout((function(){console.debug("updating"),u.clearRect(0,0,w.width,w.height),c.step(),f(),requestAnimationFrame(h)}),1e3/3)}w.height=l*t,w.width=l*t,r.addEventListener("click",(function(e){void 0===c.get_game_status()?(r.textContent="Playing ...",c.change_game_status(),h()):location.reload()})),document.addEventListener("keydown",(function(e){switch(e.code){case"ArrowUp":console.debug("change to arrow up"),c.change_snake_direction(i.Up);break;case"ArrowRight":console.debug("change to arrow right"),c.change_snake_direction(i.Right);break;case"ArrowDown":console.debug("change to arrow down"),c.change_snake_direction(i.Down);break;case"ArrowLeft":console.debug("change to arrow left"),c.change_snake_direction(i.Left)}})),f()}))},543:(e,t,n)=>{e.exports=n.p+"c732bd62afb14d2b9560.wasm"}}]);